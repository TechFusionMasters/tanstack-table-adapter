import{jsxs as e,jsx as n,Fragment as l}from"react/jsx-runtime";import i,{useState as t,useCallback as o,useMemo as a}from"react";import{useReactTable as r,getPaginationRowModel as d,getFilteredRowModel as s,getSortedRowModel as c,getCoreRowModel as u,flexRender as g}from"@tanstack/react-table";const m=()=>e("div",{className:"flex flex-col items-center justify-center h-24",children:[n("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-2"}),n("span",{className:"text-sm text-gray-700 font-medium",children:"Loading data..."})]}),p=()=>n("div",{className:"absolute inset-0 flex items-center justify-center z-10 bg-[rgba(255, 255, 255, 0.5)]",children:e("div",{className:"flex flex-col items-center justify-center p-6 ",children:[n("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent mb-2"}),n("span",{className:"text-base font-medium text-blue-700",children:"Updating results..."})]})}),b=()=>e("div",{className:"flex flex-col items-center justify-center h-24 default-loading-component",children:[n("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-2"}),n("span",{className:"text-sm text-gray-700 font-medium",children:"Loading data..."})]}),f=()=>n("div",{className:"flex items-center justify-center z-10 bg-[rgba(255, 255, 255, 0.5)] default-pagination-loading-component",children:e("div",{className:"flex items-center justify-center space-x-2 ",children:[n("div",{className:"animate-spin rounded-full h-6 w-6 border-4 border-blue-500 border-t-transparent"}),n("span",{className:"text-base font-medium text-blue-700",children:"Updating results..."})]})}),h=()=>n("tr",{children:n("td",{children:n("div",{className:"flex justify-center items-center h-24 text-gray-500",children:"No results found"})})}),y=({table:l,totalRowCount:i,isLoading:t,pageSizeOptions:o=[10,20,30,40,50]})=>{const a=void 0!==i?i:l.getFilteredRowModel().rows.length;return e("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200",children:[e("div",{className:"flex-1 flex justify-between sm:hidden",children:[n("button",{onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n("button",{onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[n("div",{children:e("p",{className:"text-sm text-gray-700",children:["Showing"," ",n("span",{className:"font-medium",children:l.getState().pagination.pageIndex*l.getState().pagination.pageSize+1})," ","to"," ",n("span",{className:"font-medium",children:Math.min((l.getState().pagination.pageIndex+1)*l.getState().pagination.pageSize,a)})," ","of ",n("span",{className:"font-medium",children:a})," results"]})}),n("div",{children:e("div",{className:"flex items-center gap-2",children:[n("button",{onClick:()=>l.setPageIndex(0),disabled:!l.getCanPreviousPage()||t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"<<"}),n("button",{onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage()||t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"<"}),e("span",{className:"flex items-center gap-1",children:[t?n("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-blue-500 mx-1"}):n("span",{children:"Page"}),e("strong",{children:[l.getState().pagination.pageIndex+1," of"," ",l.getPageCount()]})]}),n("button",{onClick:()=>l.nextPage(),disabled:!l.getCanNextPage()||t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:">"}),n("button",{onClick:()=>l.setPageIndex(l.getPageCount()-1),disabled:!l.getCanNextPage()||t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:">>"}),n("select",{value:l.getState().pagination.pageSize,onChange:e=>{l.setPageSize(Number(e.target.value))},disabled:t,className:"px-2 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:o.map(n=>e("option",{value:n,children:["Show ",n]},n))})]})})]})]})};function v(m){var p,v,x,C,N,w,S,P,R,F,z,I,k,L,j,V,M,O,G,E,D,H,T,A,K,U,$,B,q,J,Q,W,X,Y,Z,_,ee,ne,le,ie,te;const oe=m.data,ae=m.columns,re=m.totalRowCount,de=m.id,se=m.debugTable,ce=m.getRowId,ue=null!==(p=m.className)&&void 0!==p?p:"w-full",ge=null!==(v=m.tableClassName)&&void 0!==v?v:"min-w-full divide-y divide-gray-200",me=null!==(x=m.headerClassName)&&void 0!==x?x:"bg-gray-50",pe=null!==(C=m.bodyClassName)&&void 0!==C?C:"bg-white divide-y divide-gray-200",be=null!==(N=m.rowClassName)&&void 0!==N?N:"",fe=null!==(w=m.cellClassName)&&void 0!==w?w:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",he=null!==(S=m.columnResizeMode)&&void 0!==S?S:"onChange",ye=null===(P=m.enablePagination)||void 0===P||P,ve=null===(R=m.enableSorting)||void 0===R||R,xe=null===(F=m.enableMultiSort)||void 0===F||F,Ce=null!==(z=m.enableColumnFilters)&&void 0!==z&&z,Ne=null!==(I=m.enableGlobalFilter)&&void 0!==I&&I,we=null!==(k=m.enableColumnResizing)&&void 0!==k&&k,Se=null!==(L=m.enableRowSelection)&&void 0!==L&&L,Pe=null!==(j=m.enableExpanding)&&void 0!==j&&j,Re=null!==(V=m.enablePinning)&&void 0!==V&&V,Fe=null!==(M=m.enableStickyHeader)&&void 0!==M&&M,ze=null!==(O=m.enableGrouping)&&void 0!==O&&O,Ie=null!==(G=m.pageSizeOptions)&&void 0!==G?G:[10,20,30,40,50],ke=null!==(E=m.pageSize)&&void 0!==E?E:10,Le=null!==(D=m.pageIndex)&&void 0!==D?D:0,je=null!==(H=m.sorting)&&void 0!==H?H:[],Ve=null!==(T=m.columnFilters)&&void 0!==T?T:[],Me=null!==(A=m.globalFilter)&&void 0!==A?A:"",Oe=null!==(K=m.columnVisibility)&&void 0!==K?K:{},Ge=null!==(U=m.rowSelection)&&void 0!==U?U:{},Ee=null!==($=m.expanded)&&void 0!==$?$:{},De=m.columnOrder,He=m.columnPinning,Te=m.grouping,Ae=m.onPaginationChange,Ke=m.onSortingChange,Ue=m.onColumnFiltersChange,$e=m.onGlobalFilterChange,Be=m.onColumnVisibilityChange,qe=m.onRowSelectionChange,Je=m.onExpandedChange,Qe=m.onColumnOrderChange,We=m.onColumnPinningChange,Xe=m.onGroupingChange,Ye=null!==(B=m.manualPagination)&&void 0!==B&&B,Ze=null!==(q=m.manualSorting)&&void 0!==q&&q,_e=null!==(J=m.manualFiltering)&&void 0!==J&&J,en=null!==(Q=m.manualGrouping)&&void 0!==Q&&Q,nn=null!==(W=m.pageCount)&&void 0!==W?W:-1,ln=null!==(X=m.autoResetPageIndex)&&void 0!==X?X:!Ye,tn=m.globalFilterFn,on=m.renderTableHeader,an=m.renderTableFooter,rn=null!==(Y=m.renderPagination)&&void 0!==Y?Y:y,dn=null!==(Z=m.renderNoResults)&&void 0!==Z?Z:h;m.renderExpanded;const sn=m.renderRowSubComponent;m.renderGroupedCell;const cn=m.onRowClick,un=m.onCellClick;m.onExportData;const gn=null!==(_=m.isLoading)&&void 0!==_&&_,mn=null!==(ee=m.isPaginationLoading)&&void 0!==ee&&ee,pn=null!==(ne=m.loadingComponent)&&void 0!==ne?ne:n(b,{}),bn=null!==(le=m.paginationLoadingComponent)&&void 0!==le?le:n(f,{}),fn=null!==(ie=m.showOverlayLoading)&&void 0!==ie&&ie,hn=m.ariaLabel,yn=m.ariaLabelledBy,vn=m.ariaDescribedBy,xn=m.renderSortIcon,Cn=null===(te=m.enableSortingRemoval)||void 0===te||te,[Nn,wn]=t({pageIndex:Le,pageSize:ke}),[Sn,Pn]=t(je),[Rn,Fn]=t(Ve),[zn,In]=t(Me),[kn,Ln]=t(Oe),[jn,Vn]=t(Ge),[Mn,On]=t(Ee),[Gn,En]=t(De||[]),[Dn,Hn]=t(He||{left:[],right:[]}),[Tn,An]=t(Te||[]),Kn={pagination:!!Ae,sorting:!!Ke,columnFilters:!!Ue,globalFilter:!!$e,columnVisibility:!!Be,rowSelection:!!qe,expanded:!!Je,columnOrder:!!Qe,columnPinning:!!We,grouping:!!Xe},Un=Kn.pagination?{pageIndex:Le,pageSize:ke}:Nn,$n=Kn.sorting?je:Sn,Bn=Kn.columnFilters?Ve:Rn,qn=Kn.globalFilter?Me:zn,Jn=Kn.columnVisibility?Oe:kn,Qn=Kn.rowSelection?Ge:jn,Wn=Kn.expanded?Ee:Mn,Xn=Kn.columnOrder?De||[]:Gn,Yn=Kn.columnPinning?He||{left:[],right:[]}:Dn,Zn=Kn.grouping?Te||[]:Tn,_n=o(e=>{if(Kn.pagination){const n="function"==typeof e?e(Un):e;Ae(n)}else wn(n=>"function"==typeof e?e(n):e)},[Kn.pagination,Un,Ae]),el=o(e=>{if(Kn.sorting){const n="function"==typeof e?e($n):e;Ke(n)}else Pn(n=>"function"==typeof e?e(n):e)},[Kn.sorting,$n,Ke]),nl=o(e=>{if(Kn.columnFilters){const n="function"==typeof e?e(Bn):e;Ue(n)}else Fn(n=>"function"==typeof e?e(n):e)},[Kn.columnFilters,Bn,Ue]),ll=o(e=>{if(Kn.globalFilter){const n="function"==typeof e?e(qn):e;$e(n)}else In(n=>"function"==typeof e?e(n):e)},[Kn.globalFilter,qn,$e]),il=o(e=>{if(Kn.columnVisibility){const n="function"==typeof e?e(Jn):e;Be(n)}else Ln(n=>"function"==typeof e?e(n):e)},[Kn.columnVisibility,Jn,Be]),tl=o(e=>{if(Kn.rowSelection){const n="function"==typeof e?e(Qn):e;qe(n)}else Vn(n=>"function"==typeof e?e(n):e)},[Kn.rowSelection,Qn,qe]),ol=o(e=>{if(Kn.expanded){const n="function"==typeof e?e(Wn):e;Je(n)}else On(n=>"function"==typeof e?e(n):e)},[Kn.expanded,Wn,Je]),al=o(e=>{if(Kn.columnOrder){const n="function"==typeof e?e(Xn):e;Qe(n)}else En(n=>"function"==typeof e?e(n):e)},[Kn.columnOrder,Xn,Qe]),rl=o(e=>{if(Kn.columnPinning){const n="function"==typeof e?e(Yn):e;We(n)}else Hn(n=>"function"==typeof e?e(n):e)},[Kn.columnPinning,Yn,We]),dl=o(e=>{if(Kn.grouping){const n="function"==typeof e?e(Zn):e;Xe(n)}else An(n=>"function"==typeof e?e(n):e)},[Kn.grouping,Zn,Xe]),sl=a(()=>oe,[oe]),cl=r({data:sl,columns:ae,enableSorting:ve,enableMultiSort:xe,enableColumnFilters:Ce,enableGlobalFilter:Ne,enableRowSelection:Se,enableExpanding:Pe,enableColumnResizing:we,enablePinning:Re,enableGrouping:ze,enableSortingRemoval:Cn,state:{sorting:$n,columnFilters:Bn,globalFilter:qn,pagination:Un,columnVisibility:Jn,rowSelection:Qn,expanded:Wn,columnOrder:Xn,columnPinning:Yn,grouping:Zn},onSortingChange:el,onColumnFiltersChange:nl,onGlobalFilterChange:ll,onPaginationChange:_n,onColumnVisibilityChange:il,onRowSelectionChange:tl,onExpandedChange:ol,onColumnOrderChange:al,onColumnPinningChange:rl,onGroupingChange:dl,getCoreRowModel:u(),getSortedRowModel:Ze?void 0:c(),getFilteredRowModel:_e?void 0:s(),getPaginationRowModel:Ye?void 0:d(),manualPagination:Ye,manualSorting:Ze,manualFiltering:_e,manualGrouping:en,autoResetPageIndex:ln,pageCount:nn>0?nn:void 0,globalFilterFn:tn,columnResizeMode:he,getRowId:ce,debugTable:se,meta:{updateData:(e,n,l)=>{console.log("Update data",e,n,l)}}});return e("div",{className:ue,id:de,children:[on&&on(cl),e("div",{className:"overflow-x-auto relative "+(fn&&gn?"opacity-60":""),children:[fn&&gn&&n("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-70 z-10",children:pn}),e("table",{className:ge,"aria-label":hn,"aria-labelledby":yn,"aria-describedby":vn,children:[n("thead",{className:`${me} ${Fe?"sticky top-0 z-10":""}`,children:cl.getHeaderGroups().map(l=>n("tr",{children:l.headers.map(l=>{var i;return e("th",{colSpan:l.colSpan,className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:l.getSize(),position:"relative"},children:[l.isPlaceholder?null:e("div",{className:ve&&l.column.getCanSort()?"cursor-pointer select-none":"",onClick:l.column.getToggleSortingHandler(),children:[g(l.column.columnDef.header,l.getContext()),xn?xn(l.column.getIsSorted()):null!==(i={asc:" ðŸ”¼",desc:" ðŸ”½"}[l.column.getIsSorted()])&&void 0!==i?i:null]}),we&&l.column.getCanResize()&&n("div",{onMouseDown:l.getResizeHandler(),onTouchStart:l.getResizeHandler(),className:"absolute right-0 top-0 h-full w-1 bg-gray-300 cursor-col-resize touch-none select-none "+(l.column.getIsResizing()?"bg-blue-500":"")})]},l.id)})},l.id))}),n("tbody",{className:pe,children:gn&&!fn&&0===oe.length?n("tr",{children:n("td",{colSpan:cl.getAllColumns().filter(e=>e.getIsVisible()).length,className:"px-6 py-12 text-center",children:pn})}):mn&&!fn&&oe.length>0?e(l,{children:[n("tr",{children:n("td",{colSpan:cl.getAllColumns().filter(e=>e.getIsVisible()).length,className:"px-6 py-2 text-center border-b",children:bn})}),cl.getRowModel().rows.map(e=>{const l="function"==typeof be?be(e):be;return n("tr",{className:`${l} opacity-50`,children:e.getVisibleCells().map(l=>{const i="function"==typeof fe?fe(e,l.column.id):fe;return n("td",{className:i,children:g(l.column.columnDef.cell,l.getContext())},l.id)})},e.id)})]}):0===cl.getRowModel().rows.length?dn?dn(cl):n("tr",{children:n("td",{colSpan:cl.getAllColumns().filter(e=>e.getIsVisible()).length,className:"px-6 py-12 text-center text-gray-500",children:n(h,{})})}):cl.getRowModel().rows.map(l=>{const t="function"==typeof be?be(l):be;return e(i.Fragment,{children:[n("tr",{className:t,onClick:cn?()=>cn(l):void 0,children:l.getVisibleCells().map(e=>{const i="function"==typeof fe?fe(l,e.column.id):fe;return n("td",{className:i,onClick:un?()=>un(l,e.column.id):void 0,children:g(e.column.columnDef.cell,e.getContext())},e.id)})}),Pe&&l.getIsExpanded()&&sn&&n("tr",{children:n("td",{colSpan:l.getVisibleCells().length,children:sn(l)})})]},l.id)})})]})]}),an&&an(cl),ye&&rn&&rn({table:cl,totalRowCount:re,isLoading:mn,pageSizeOptions:Ie})]})}function x({isInitialLoading:i=!1,isPaginationLoading:t=!1,loadingComponent:o,paginationLoadingComponent:a,children:r}){const d=o||n(m,{}),s=a||n(p,{});return e("div",{className:"relative",children:[i&&n("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-60 backdrop-blur-sm z-10",children:d}),!i&&t&&n(l,{children:s}),n("div",{className:t?"opacity-70 transition-opacity duration-200":"",children:r})]})}const C=({value:e,onChange:l,placeholder:i="Search...",className:t="px-4 py-2 border rounded"})=>n("input",{type:"text",value:e,onChange:e=>l(e.target.value),placeholder:i,className:t}),N=({table:l,className:i="p-2"})=>n("div",{className:i,children:n("div",{className:"flex flex-wrap gap-2",children:l.getAllLeafColumns().map(l=>n("div",{className:"flex items-center",children:e("label",{className:"flex items-center",children:[n("input",{type:"checkbox",checked:l.getIsVisible(),onChange:l.getToggleVisibilityHandler(),className:"mr-1"}),l.id]})},l.id))})}),w=(e,n,l,i)=>{if(!l||""===l)return!0;const t=((e,n)=>{const l=n.split(".");let i=e;for(const e of l){if(null==i)return null;i=i[e]}return i})(e.original,n);if(null==t)return!1;const o=String(t).toLowerCase(),a=String(l).toLowerCase();return o.includes(a)},S=(e,n,l="export.csv")=>{const i=n.filter(e=>!("columns"in e&&e.columns)).map(e=>"string"==typeof e.header?e.header:e.id||String("accessorKey"in e?e.accessorKey:"")),t=e.map(e=>n.filter(e=>!("columns"in e&&e.columns)).map(n=>{let l="";if("accessorKey"in n&&n.accessorKey){const i=String(n.accessorKey);l=e[i]}else"accessorFn"in n&&n.accessorFn?l=n.accessorFn(e,0):n.id&&(l=e[n.id]);return"string"==typeof l?`"${l.replace(/"/g,'""')}"`:String(l)})),o=[i.join(","),...t.map(e=>e.join(","))].join("\n"),a=new Blob([o],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(a),d=document.createElement("a");d.setAttribute("href",r),d.setAttribute("download",l),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)};export{N as ColumnVisibilityToggle,y as DefaultPaginationComponent,C as GlobalFilterInput,v as TableAdapter,x as TableWithLoadingStates,S as exportToCSV,w as fuzzyFilter};
//# sourceMappingURL=index.esm.js.map
